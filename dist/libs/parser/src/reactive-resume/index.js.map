{"version":3,"sources":["../../../../../libs/parser/src/reactive-resume/index.ts"],"sourcesContent":["import { ResumeData, resumeDataSchema } from \"@reactive-resume/schema\";\nimport { Json } from \"@reactive-resume/utils\";\nimport { Schema } from \"zod\";\n\nimport { Parser } from \"../interfaces/parser\";\n\nexport class ReactiveResumeParser implements Parser<Json, ResumeData> {\n  schema: Schema;\n\n  constructor() {\n    this.schema = resumeDataSchema;\n  }\n\n  readFile(file: File): Promise<Json> {\n    return new Promise((resolve, reject) => {\n      const reader = new FileReader();\n\n      // eslint-disable-next-line unicorn/prefer-add-event-listener\n      reader.onload = () => {\n        try {\n          const result = JSON.parse(reader.result as string) as Json;\n          resolve(result);\n        } catch {\n          reject(new Error(\"Failed to parse JSON\"));\n        }\n      };\n\n      // eslint-disable-next-line unicorn/prefer-add-event-listener\n      reader.onerror = () => {\n        reject(new Error(\"Failed to read the file\"));\n      };\n\n      // eslint-disable-next-line unicorn/prefer-blob-reading-methods\n      reader.readAsText(file);\n    });\n  }\n\n  validate(data: Json) {\n    return this.schema.parse(data) as ResumeData;\n  }\n\n  convert(data: ResumeData) {\n    return data;\n  }\n}\n"],"names":["ReactiveResumeParser","readFile","file","Promise","resolve","reject","reader","FileReader","onload","result","JSON","parse","Error","onerror","readAsText","validate","data","schema","convert","constructor","resumeDataSchema"],"mappings":";;;;+BAMaA;;;eAAAA;;;wBANgC;AAMtC,IAAA,AAAMA,uBAAN,MAAMA;IAOXC,SAASC,IAAU,EAAiB;QAClC,OAAO,IAAIC,QAAQ,CAACC,SAASC;YAC3B,MAAMC,SAAS,IAAIC;YAEnB,6DAA6D;YAC7DD,OAAOE,MAAM,GAAG;gBACd,IAAI;oBACF,MAAMC,SAASC,KAAKC,KAAK,CAACL,OAAOG,MAAM;oBACvCL,QAAQK;gBACV,EAAE,UAAM;oBACNJ,OAAO,IAAIO,MAAM;gBACnB;YACF;YAEA,6DAA6D;YAC7DN,OAAOO,OAAO,GAAG;gBACfR,OAAO,IAAIO,MAAM;YACnB;YAEA,+DAA+D;YAC/DN,OAAOQ,UAAU,CAACZ;QACpB;IACF;IAEAa,SAASC,IAAU,EAAE;QACnB,OAAO,IAAI,CAACC,MAAM,CAACN,KAAK,CAACK;IAC3B;IAEAE,QAAQF,IAAgB,EAAE;QACxB,OAAOA;IACT;IAlCAG,aAAc;QACZ,IAAI,CAACF,MAAM,GAAGG,wBAAgB;IAChC;AAiCF"}